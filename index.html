<!DOCTYPE html>
<html>
<head><title>ElevenLabs TTS Test</title></head>
<body>
  <textarea id="script" rows="5" cols="50">Hello from ElevenLabs TTS!</textarea><br>
  <button onclick="generateAudio()">Generate Audio</button>
  <div id="audioContainer"></div>
  <script>
    async function generateAudio() {
      const script = document.getElementById('script').value;
      const res = await fetch('http://localhost:3000/generate-audio', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ script, language: 'en' })
      });

      if (!res.ok) {
        alert('Error generating audio');
        return;
      }

      const blob = await res.blob();
      const url = URL.createObjectURL(blob);

      // Create audio element
      const audio = new Audio(url);
      audio.controls = true;

      // Create download link
      const downloadLink = document.createElement('a');
      downloadLink.href = url;
      downloadLink.download = 'output.mp3';
      downloadLink.innerText = 'Download Audio';

      const container = document.getElementById('audioContainer');
      container.innerHTML = ''; // clear previous
      container.appendChild(audio);
      container.appendChild(document.createElement('br'));
      container.appendChild(downloadLink);

      audio.play();
    }
  </script>
</body>
</html>
