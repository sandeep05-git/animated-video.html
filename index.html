<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Animated Video Creator</title>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 30px auto; padding: 0 20px; }
    textarea, select, button { width: 100%; margin-top: 15px; padding: 10px; font-size: 16px; }
    #animation { margin-top: 25px; text-align: center; }
  </style>
</head>
<body>
  <h1>Animated Video Creator</h1>

  <textarea id="scriptInput" placeholder="Enter your text here..." rows="5"></textarea>

  <select id="characterSelect">
    <option value="teacher">Teacher</option>
    <option value="seller">Seller</option>
    <option value="boss">Boss</option>
  </select>

  <button onclick="createVideo()">Generate Video</button>

  <div id="animation"></div>

  <audio id="audioPlayer" controls style="width: 100%; margin-top: 20px;"></audio>

  <script>
    const animations = {
      teacher: 'https://assets10.lottiefiles.com/packages/lf20_teacher.json',
      seller: 'https://assets8.lottiefiles.com/packages/lf20_nkzbbd9y.json',
      boss: 'https://assets6.lottiefiles.com/packages/lf20_boss_animation.json',
    };

    function createVideo() {
      const text = document.getElementById('scriptInput').value.trim();
      const character = document.getElementById('characterSelect').value;

      if (!text) {
        alert('Please enter some text!');
        return;
      }

      const animationUrl = animations[character];
      const animationContainer = document.getElementById('animation');
      const audioPlayer = document.getElementById('audioPlayer');

      // Clear previous animation
      animationContainer.innerHTML = '';

      // Create and add a new Lottie player
      const lottiePlayer = document.createElement('lottie-player');
      lottiePlayer.setAttribute('src', animationUrl);
      lottiePlayer.setAttribute('background', 'transparent');
      lottiePlayer.setAttribute('speed', '1');
      lottiePlayer.setAttribute('loop', '');
      lottiePlayer.setAttribute('autoplay', '');
      lottiePlayer.style.width = '300px';
      lottiePlayer.style.height = '300px';

      animationContainer.appendChild(lottiePlayer);

      // Set and play audio
      const audioUrl = `https://api.streamelements.com/kappa/v2/speech?voice=Brian&text=${encodeURIComponent(text)}`;
      audioPlayer.src = audioUrl;
      audioPlayer.play();
    }
  </script>
</body>
</html>
