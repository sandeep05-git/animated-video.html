<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Talking Characters Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
  }
  .character {
    position: relative;
    width: 200px;  /* width of one character */
    height: 300px; /* height of image */
    background-image: url('combined.png'); /* your combined image */
    background-size: 400px 300px; /* full size of combined image */
    background-repeat: no-repeat;
    display: inline-block;
    margin-right: 40px;
  }

  #male {
    background-position: 0 0; /* show left half */
  }

  #female {
    background-position: -200px 0; /* show right half */
  }

  /* Mouth overlay */
  .mouth {
    position: absolute;
    bottom: 50px;  /* adjust to position mouth correctly */
    left: 50px;    /* adjust to center mouth horizontally */
    width: 100px;
    height: 50px;
    background-size: contain;
    background-repeat: no-repeat;
    background-image: url('mouth-closed.png'); /* default mouth */
  }
</style>
</head>
<body>

<h2>Talking Characters Demo</h2>

<textarea id="scriptBox" rows="3" cols="60" placeholder="Type your script here...">Hello, this is the seller support tutorial!</textarea><br><br>

<button onclick="startTalking('male')">Male Talk</button>
<button onclick="startTalking('female')">Female Talk</button>

<div>
  <div id="male" class="character">
    <div class="mouth" id="male-mouth"></div>
  </div>
  <div id="female" class="character">
    <div class="mouth" id="female-mouth"></div>
  </div>
</div>

<script>
  // Mouth images for animation (You need to have these images locally)
  const mouthFrames = {
    male: ['mouth-closed.png', 'mouth-open.png'],
    female: ['mouth-closed.png', 'mouth-open.png']
  };

  let talkingInterval;

  function animateMouth(character) {
    const mouth = document.getElementById(character + '-mouth');
    let index = 0;
    talkingInterval = setInterval(() => {
      mouth.style.backgroundImage = `url('${mouthFrames[character][index]}')`;
      index = (index + 1) % mouthFrames[character].length;
    }, 200);
  }

  function stopMouthAnimation(character) {
    clearInterval(talkingInterval);
    const mouth = document.getElementById(character + '-mouth');
    mouth.style.backgroundImage = `url('${mouthFrames[character][0]}')`;
  }

  function startTalking(character) {
    const script = document.getElementById('scriptBox').value.trim();
    if (!script) {
      alert('Please enter a script!');
      return;
    }

    animateMouth(character);

    const utterance = new SpeechSynthesisUtterance(script);
    utterance.lang = 'en-US'; // Change language if needed

    utterance.onend = () => {
      stopMouthAnimation(character);
    };

    speechSynthesis.speak(utterance);
  }
</script>

</body>
</html>
