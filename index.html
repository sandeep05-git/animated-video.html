<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Simple Animated Video Test</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.9.6/lottie.min.js"></script>
<script src="https://code.responsivevoice.org/responsivevoice.js"></script>
<style>
  #animationContainer { width: 300px; height: 300px; margin: 20px auto; }
</style>
</head>
<body>

<textarea id="script" placeholder="Enter script here" style="width:100%; height:80px;"></textarea><br/>
<button onclick="run()">Play</button>

<div id="animationContainer"></div>

<script>
  const animations = {
    happy: "https://assets10.lottiefiles.com/packages/lf20_0fhlytwe.json",
    angry: "https://assets10.lottiefiles.com/packages/lf20_ku4u2vuw.json",
    neutral: "https://assets10.lottiefiles.com/packages/lf20_9chb8p4d.json"
  };

  let animation;

  function detectEmotion(text) {
    text = text.toLowerCase();
    if (text.includes("happy")) return "happy";
    if (text.includes("angry")) return "angry";
    return "neutral";
  }

  function run() {
    let text = document.getElementById('script').value;
    let emotion = detectEmotion(text);

    if(animation) animation.destroy();

    animation = lottie.loadAnimation({
      container: document.getElementById('animationContainer'),
      renderer: 'svg',
      loop: true,
      autoplay: true,
      path: animations[emotion]
    });

    responsiveVoice.speak(text, "UK English Female");
  }
</script>

</body>
</html>
