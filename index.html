<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Animated Video Creator</title>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 30px auto; padding: 0 20px; }
    textarea, select, button { width: 100%; margin-top: 15px; padding: 10px; font-size: 16px; }
    #animation { margin-top: 25px; text-align: center; }
  </style>
</head>
<body>
  <h1>Animated Video Creator</h1>

  <textarea id="scriptInput" placeholder="Enter your text here..." rows="5"></textarea>

  <select id="characterSelect">
    <option value="teacher">Teacher</option>
    <option value="seller">Seller</option>
    <option value="boss">Boss</option>
  </select>

  <button onclick="createVideo()">Generate Video</button>

  <div id="animation">
    <lottie-player
      id="lottieAnim"
      background="transparent"
      speed="1"
      style="width: 300px; height: 300px;"
      loop autoplay
    ></lottie-player>
    <audio id="audioPlayer" controls style="width: 100%; margin-top: 20px;"></audio>
  </div>

  <script>
    const animations = {
      teacher: 'https://assets10.lottiefiles.com/packages/lf20_teacher.json',
      seller: 'https://assets8.lottiefiles.com/packages/lf20_nkzbbd9y.json',
      boss: 'https://assets6.lottiefiles.com/packages/lf20_boss_animation.json',
    };

    function createVideo() {
      const text = document.getElementById('scriptInput').value.trim();
      if (!text) {
        alert('Please enter some text!');
        return;
      }

      const character = document.getElementById('characterSelect').value;
      const lottiePlayer = document.getElementById('lottieAnim');
      const audioPlayer = document.getElementById('audioPlayer');

      // Set the animation JSON URL
      const animationUrl = animations[character];
      if (!animationUrl) {
        alert('Animation not found for the selected character!');
        return;
      }
      lottiePlayer.setAttribute('src', animationUrl);

      // Generate TTS audio URL using StreamElements API
      const audioUrl = `https://api.streamelements.com/kappa/v2/speech?voice=Brian&text=${encodeURIComponent(text)}`;
      audioPlayer.src = audioUrl;
      audioPlayer.play();
    }
  </script>
</body>
</html>
